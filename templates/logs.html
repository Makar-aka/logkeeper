<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Логи</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include 'navigation.html' %}
    <div class="container">
        <h1>Логи устройства: {{ device_id }}</h1>

        <!-- Кнопка "Назад" -->
        <div style="margin-bottom: 20px;">
            <a href="/devices" class="back-button">Назад</a>
        </div>

        <!-- Настройка количества строк -->
        <form method="GET" action="{{ url_for('view_logs_by_device', device_id=device_id) }}" style="margin-bottom: 20px;">
            <label for="rows_per_page">Отображать строк:</label>
            <select name="rows_per_page" id="rows_per_page" onchange="this.form.submit()">
                <option value="10" {% if rows_per_page==10 %}selected{% endif %}>10</option>
                <option value="20" {% if rows_per_page==20 %}selected{% endif %}>20</option>
                <option value="50" {% if rows_per_page==50 %}selected{% endif %}>50</option>
                <option value="100" {% if rows_per_page==100 %}selected{% endif %}>100</option>
            </select>
        </form>

        <!-- Таблица логов -->
        <table class="logs-table">
            <thead>
                <tr>
                    <th class="ip-column">IP-адрес</th>
                    <th class="log-column">Лог</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    
                    <td>{{ log[1] }}</td> <!-- IP -->
                    <td>{{ log[2] }}</td> <!-- Лог -->
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Пагинация -->
        <div class="pagination">
            {% if page > 1 %}
            <a href="{{ url_for('view_logs_by_device', device_id=device_id, page=page-1, rows_per_page=rows_per_page) }}">&laquo; Предыдущая</a>
            {% endif %}
            {% for p in range(1, total_pages + 1) %}
            <a href="{{ url_for('view_logs_by_device', device_id=device_id, page=p, rows_per_page=rows_per_page) }}" class="{% if p == page %}active{% endif %}">{{ p }}</a>
            {% endfor %}
            {% if page < total_pages %}
            <a href="{{ url_for('view_logs_by_device', device_id=device_id, page=page+1, rows_per_page=rows_per_page) }}">Следующая &raquo;</a>
            {% endif %}
        </div>
    </div>
    <footer>
        © <a href="https://github.com/Makar-aka" target="_blank">MakarSPB</a>
    </footer>
</body>
</html>